(function(e){function t(t){for(var n,o,s=t[0],i=t[1],d=t[2],l=0,p=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&p.push(c[o][0]),c[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var i=a[s];0!==c[i]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},c={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1204:function(e,t,a){"use strict";a("91f9")},1313:function(e,t,a){},1849:function(e,t,a){"use strict";a("eca0")},"1d8a":function(e,t,a){"use strict";a("ac5b")},"1ff7":function(e,t,a){"use strict";a("6311")},"203a":function(e,t,a){},"20e0":function(e,t,a){"use strict";a("6ea1")},"21dd":function(e,t,a){},2451:function(e,t,a){},2948:function(e,t,a){},"2b6f":function(e,t,a){},"2f70":function(e,t,a){},"35c6":function(e,t,a){"use strict";a("2948")},"3ad7":function(e,t,a){},4905:function(e,t,a){"use strict";a("88ee")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),c={key:0},r={key:1},o={key:2},s={key:3,id:"container"};function i(e,t,a,i,d,u){var l=Object(n["s"])("Sidebar"),p=Object(n["s"])("Header"),b=Object(n["s"])("AllRoutes"),h=Object(n["s"])("ComputedRoutes"),f=Object(n["s"])("SceneList"),m=Object(n["s"])("DataByPath");return Object(n["m"])(),Object(n["g"])(n["a"],null,[Object(n["j"])(l,{onSidebar_click:u.sidebarManager},null,8,["onSidebar_click"]),Object(n["h"])("div",{id:"nav",style:Object(n["l"])({"margin-left":i.sidebarWidth})},[Object(n["j"])(p,{id:"Header",title:"VR@COVID Paths Analysis",fields:d.fields,onFilesLoaded:u.computeData,isLoading:d.isLoading,mapScenes:d.scenes,mapCategories:d.categories,mapThemes:d.themes,csvData:d.csvData,perUserScores:d.perUserScores},null,8,["fields","onFilesLoaded","isLoading","mapScenes","mapCategories","mapThemes","csvData","perUserScores"]),"all"==d.display?(Object(n["m"])(),Object(n["g"])("div",c,[Object(n["j"])(b,{paths:d.paths},null,8,["paths"])])):Object(n["f"])("",!0),"compute"==d.display?(Object(n["m"])(),Object(n["g"])("div",r,[Object(n["j"])(h,{categories:d.categories,computedPaths:d.computedPaths,onUpdateAndComputePaths:u.updateAndComputePaths,onMergeThematic:u.mergeThematic},null,8,["categories","computedPaths","onUpdateAndComputePaths","onMergeThematic"])])):Object(n["f"])("",!0),"categories"==d.display?(Object(n["m"])(),Object(n["g"])("div",o,[Object(n["j"])(f,{mapScenes:d.scenes,mapCategories:d.categories,mapThemes:d.themes,onSceneUpdate:u.sceneUpdate},null,8,["mapScenes","mapCategories","mapThemes","onSceneUpdate"])])):Object(n["f"])("",!0),"scorePerPath"==d.display?(Object(n["m"])(),Object(n["g"])("div",s,[Object(n["j"])(m,{data:d.scorePerPathData},null,8,["data"])])):Object(n["f"])("",!0)],4)],64)}a("159b");var d=Object(n["h"])("div",null,null,-1);function u(e,t,a,c,r,o){var s=Object(n["s"])("Legend"),i=Object(n["s"])("Checkbox"),u=Object(n["s"])("Paths");return Object(n["m"])(),Object(n["g"])(n["a"],null,[d,Object(n["j"])(s,{onCheck:o.legendSelector,categories:o.mapToArray(a.categories)},null,8,["onCheck","categories"]),Object(n["j"])(i,{onCheck:o.mergeThematic,name:"Merge thematics"},null,8,["onCheck"]),Object(n["j"])(u,{paths:a.computedPaths,display:"compute",categories:a.categories},null,8,["paths","categories"])],64)}a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("d81d"),a("ac1f"),a("1276"),a("7db0"),a("2ca0");var l=function(e){var t=[];return e.forEach((function(e,a){e.id=a,t.push(e)})),t},p=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},b=function(e){return JSON.parse(JSON.stringify({data:e}))};Object(n["o"])("data-v-5fb72bcc");var h={class:"LegendContainer"};function f(e,t,a,c,r,o){var s=Object(n["s"])("LegendEntry");return Object(n["m"])(),Object(n["g"])("div",h,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.categories,(function(e){return Object(n["m"])(),Object(n["g"])("div",{key:e.id},[Object(n["j"])(s,{onCheck:o.entrychecked,entry:e},null,8,["onCheck","entry"])])})),128))])}Object(n["n"])(),Object(n["o"])("data-v-6428bf16");var m={class:"entry_container"},j={class:"entry_name"},O=["checked"];function g(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",m,[Object(n["h"])("div",{class:"entry_color",style:Object(n["l"])({background:a.entry.color})},null,4),Object(n["h"])("p",j,Object(n["t"])(a.entry.id),1),Object(n["h"])("input",{class:"entry_checkbox",type:"checkbox",checked:a.entry.whitelisted,onClick:t[0]||(t[0]=function(t){return e.$emit("check",{id:a.entry.id,checked:t.target.checked})})},null,8,O)])}Object(n["n"])();var y={name:"LegendEntry",emits:["check"],props:{entry:{type:Object,required:!0}}};a("1204");y.render=g,y.__scopeId="data-v-6428bf16";var v=y,S={name:"Legend",emits:["check"],components:{LegendEntry:v},props:{categories:{type:Array,required:!0}},methods:{entrychecked:function(e){this.$emit("check",e)}}};a("82f4");S.render=f,S.__scopeId="data-v-5fb72bcc";var k=S;Object(n["o"])("data-v-5706088a");var P={class:"entry_container"},_={class:"entry_name"};function C(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",P,[Object(n["h"])("p",_,Object(n["t"])(a.name),1),Object(n["h"])("input",{class:"entry_checkbox",type:"checkbox",checked:!1,onClick:t[0]||(t[0]=function(t){return e.$emit("check",t.target.checked)})})])}Object(n["n"])();var w={name:"Checkbox",emits:["check"],props:{name:{type:String,required:!0}}};a("5ce6");w.render=C,w.__scopeId="data-v-5706088a";var x=w;function D(e,t,a,c,r,o){var s=Object(n["s"])("Path");return Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.paths,(function(e){return Object(n["m"])(),Object(n["g"])("div",{key:e.id},[Object(n["j"])(s,{path:e,display:a.display,categories:a.categories},null,8,["path","display","categories"])])})),128)}a("99af"),a("b680");Object(n["o"])("data-v-5b4bc493");var L={class:"path"},T={key:0,class:"scenes_path"},I=Object(n["h"])("i",{class:"fas fa-arrow-right"},null,-1),M={key:1,class:"scenes_path"},A=Object(n["h"])("i",{class:"fas fa-arrow-right"},null,-1);function U(e,t,a,c,r,o){var s=Object(n["s"])("SceneInPath"),i=Object(n["s"])("SceneInPathComputed");return Object(n["m"])(),Object(n["g"])("div",L,[Object(n["h"])("h3",null," Id : "+Object(n["t"])(void 0==a.path.proportion?a.path.id:"".concat(a.path.id,"  -  Entries : ").concat(a.path.entries,"  -  Proportion : ").concat(a.path.proportion.toFixed(2))),1),Object(n["h"])("p",null,Object(n["t"])(a.path.name),1),"all"==a.display?(Object(n["m"])(),Object(n["g"])("div",T,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.path.scenes,(function(e){return Object(n["m"])(),Object(n["g"])("div",{key:e.enterTime,class:"scenes_path"},[I,Object(n["j"])(s,{scene:e.scene,time:e.enterTime},null,8,["scene","time"])])})),128))])):Object(n["f"])("",!0),"compute"==a.display?(Object(n["m"])(),Object(n["g"])("div",M,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.path.path,(function(e){return Object(n["m"])(),Object(n["g"])("div",{key:e.id,class:"scenes_path"},[A,Object(n["j"])(i,{scene:e,categoriesInfo:a.categories},null,8,["scene","categoriesInfo"])])})),128))])):Object(n["f"])("",!0)])}Object(n["n"])();a("25f0");Object(n["o"])("data-v-20acb322");var W={class:"sceneInPath"};function F(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",W,[Object(n["h"])("p",null,Object(n["t"])(a.scene),1),Object(n["h"])("p",null,Object(n["t"])(a.time.toString()),1)])}Object(n["n"])();var E={name:"SceneInPath",props:{scene:{type:String,default:"Unknown Scene"},time:{type:Date,default:"Unknown Time"}}};a("edf2");E.render=F,E.__scopeId="data-v-20acb322";var q=E;Object(n["o"])("data-v-4fa8fab5");var $={class:"sceneInPath"},z=Object(n["h"])("i",{class:"far fa-plus-square"},null,-1),N={key:0,class:"sceneInPathInfo"},R=Object(n["h"])("p",null,"**********************",-1),J={key:0},B={key:1};function V(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",{class:"container",onClick:t[0]||(t[0]=function(){return o.toggleInfo&&o.toggleInfo.apply(o,arguments)}),style:Object(n["l"])({border:"3px solid ".concat(a.categoriesInfo.get(this.scene.category).color)})},[Object(n["h"])("div",$,[Object(n["h"])("p",null,Object(n["t"])(a.scene.category),1),Object(n["h"])("p",null,Object(n["t"])(a.scene.theme),1),z]),Object(n["j"])(n["b"],{name:"expand"},{default:Object(n["u"])((function(){return[0==r.infoCollapse?(Object(n["m"])(),Object(n["g"])("div",N,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.scene.thematicsData,(function(e){return Object(n["m"])(),Object(n["g"])("div",{key:e.theme},[R,Object(n["h"])("div",null,Object(n["t"])("".concat(e.theme,"--- Occ:").concat(e.occurences," - Acc:").concat(e.accesses)),1),(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(e.accesDetails,(function(e){return Object(n["m"])(),Object(n["g"])("div",{key:e.name},[Object(n["h"])("div",null,Object(n["t"])("".concat(e.name,"--- Occ:").concat(e.occurences," - Acc:").concat(e.accesses)),1),"chambre_entrainement"==a.scene.category?(Object(n["m"])(),Object(n["g"])("div",J,Object(n["t"])("Found : Min ".concat(e.zonesFoundMin," - Moy ").concat(e.zonesFoundMoy.toFixed(1)," - Max ").concat(e.zonesFoundMax)),1)):Object(n["f"])("",!0),"chambre_entrainement"==a.scene.category?(Object(n["m"])(),Object(n["g"])("div",B,Object(n["t"])("Scored : Min ".concat(e.zonesScoredMin," - Moy ").concat(e.zonesScoredMoy.toFixed(1)," - Max ").concat(e.zonesScoredMax)),1)):Object(n["f"])("",!0)])})),128))])})),128))])):Object(n["f"])("",!0)]})),_:1})],4)}Object(n["n"])();var H={name:"SceneInPathComputed",props:{scene:Object,categoriesInfo:{type:Map}},data:function(){return{color:String,infoCollapse:!0}},created:function(){this.color="red"},methods:{toggleInfo:function(){this.infoCollapse=!this.infoCollapse}}};a("fd94");H.render=V,H.__scopeId="data-v-4fa8fab5";var G=H,K={name:"Path",components:{SceneInPath:q,SceneInPathComputed:G},props:{path:Object,display:String,categories:Map}};a("ae06");K.render=U,K.__scopeId="data-v-5b4bc493";var Q=K,X={name:"Paths",components:{Path:Q},props:{paths:Array,display:String,categories:Map}};X.render=D;var Y=X,Z={name:"ComputedRoutes",emits:["updateAndComputePaths","mergeThematic"],components:{Legend:k,Checkbox:x,Paths:Y},props:{categories:{type:Map,default:[]},computedPaths:{type:Array,default:[]}},created:function(){},methods:{legendSelector:function(e){this.categories.get(e.id).whitelisted=e.checked,this.$emit("updateAndComputePaths")},mapToArray:function(e){return l(e)},mergeThematic:function(e){this.$emit("mergeThematic",e)}}};Z.render=u;var ee=Z;function te(e,t,a,c,r,o){var s=Object(n["s"])("Paths");return Object(n["m"])(),Object(n["e"])(s,{paths:a.paths,display:"all"},null,8,["paths"])}var ae={name:"AllRoutes",props:{paths:{type:Array,default:[]}},components:{Paths:Y}};ae.render=te;var ne=ae;Object(n["o"])("data-v-d5a2e99c");var ce=Object(n["h"])("input",{id:"categoryName",type:"text",placeholder:"add category"},null,-1),re=[ce],oe=Object(n["h"])("input",{id:"themeName",type:"text",placeholder:"add theme"},null,-1),se=[oe],ie={id:"sceneList"},de={id:"categoryList"},ue={class:"sticky"},le={id:"themeList"},pe={class:"sticky"};function be(e,t,a,c,r,o){var s=Object(n["s"])("Scene"),i=Object(n["s"])("SceneProperty");return Object(n["m"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("form",{onSubmit:t[0]||(t[0]=function(){return o.addCategory&&o.addCategory.apply(o,arguments)})},re,32),Object(n["h"])("form",{onSubmit:t[1]||(t[1]=function(){return o.addTheme&&o.addTheme.apply(o,arguments)})},se,32),Object(n["h"])("div",ie,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(o.mapToArray(a.mapScenes),(function(c){return Object(n["m"])(),Object(n["e"])(s,{key:c.id,scene:c,mapCategories:a.mapCategories,mapThemes:a.mapThemes,mapScenes:a.mapScenes,onSceneUpdate:t[2]||(t[2]=function(t){return e.$emit("sceneUpdate",t)})},null,8,["scene","mapCategories","mapThemes","mapScenes"])})),128)),Object(n["h"])("div",de,[Object(n["h"])("div",ue,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(o.mapToArray(a.mapCategories),(function(e){return Object(n["m"])(),Object(n["e"])(i,{key:e.id,object:e,persistent:!0,type:"category",onDeleteProperty:o.removeProperty},null,8,["object","onDeleteProperty"])})),128))])]),Object(n["h"])("div",le,[Object(n["h"])("div",pe,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(o.mapToArray(a.mapThemes),(function(e){return Object(n["m"])(),Object(n["e"])(i,{key:e.id,object:e,persistent:!0,type:"theme",onDeleteProperty:o.removeProperty},null,8,["object","onDeleteProperty"])})),128))])])])],64)}function he(e,t,a,c,r,o){var s=Object(n["s"])("SceneProperty");return Object(n["m"])(),Object(n["g"])("div",{class:"scene",onDragenter:t[0]||(t[0]=function(){return o.dragEnter&&o.dragEnter.apply(o,arguments)}),onDragleave:t[1]||(t[1]=function(){return o.dragLeave&&o.dragLeave.apply(o,arguments)}),onDragover:t[2]||(t[2]=function(){return o.dragOver&&o.dragOver.apply(o,arguments)}),onDrop:t[3]||(t[3]=function(){return o.drop&&o.drop.apply(o,arguments)}),style:Object(n["l"])({border:"1px solid "+r.border_color})},[Object(n["h"])("span",null,Object(n["t"])(a.scene.id),1),Object(n["j"])(s,{object:this.mapCategories.get(a.scene.category),scene:a.scene,type:"category",border:r.borders.category},null,8,["object","scene","border"]),Object(n["j"])(s,{object:this.mapThemes.get(a.scene.theme),scene:a.scene,type:"theme",border:r.borders.theme},null,8,["object","scene","border"])],36)}Object(n["n"])(),Object(n["o"])("data-v-716e0ac8");var fe=["draggable"],me={class:"propertyName"},je=["value"];function Oe(e,t,a,c,r,o){var s;return Object(n["m"])(),Object(n["g"])("span",{class:Object(n["k"])(["container",a.persistent?"persistent":null]),onDragstart:t[2]||(t[2]=function(){return o.dragStart&&o.dragStart.apply(o,arguments)}),onDragend:t[3]||(t[3]=function(){return o.dragEnd&&o.dragEnd.apply(o,arguments)}),style:Object(n["l"])({background:a.object?a.object.color:"#000000",opacity:r.opacity,border:a.border}),draggable:!(!this.object||!this.persistent)},[Object(n["h"])("span",me,Object(n["t"])(null===(s=a.object)||void 0===s?void 0:s.id),1),a.persistent?(Object(n["m"])(),Object(n["g"])("input",{key:0,type:"color",value:a.object?a.object.color:"#000000",onChange:t[0]||(t[0]=function(){return o.colorchange&&o.colorchange.apply(o,arguments)})},null,40,je)):Object(n["f"])("",!0),this.object&&a.persistent?(Object(n["m"])(),Object(n["g"])("button",{key:1,onClick:t[1]||(t[1]=function(){return o.deleteProperty&&o.deleteProperty.apply(o,arguments)})}," Delete ")):Object(n["f"])("",!0)],46,fe)}Object(n["n"])();var ge={name:"SceneProperty",data:function(){return{opacity:1}},emits:["deleteProperty"],props:{object:{type:Object},scene:{type:Object},persistent:{type:Boolean,default:!1},type:{type:String,default:"category"},border:{type:String,default:""}},methods:{dragStart:function(e){e.dropEffect="move",e.dataTransfer.effectAllowed=this.persistent?"copy":"move",e.dataTransfer.setData("text",this.object.id),e.dataTransfer.setData("type",this.type),this.opacity=.5},dragEnd:function(e){this.opacity=1},colorchange:function(e){this.object.color=e.srcElement.value},deleteProperty:function(){this.$emit("deleteProperty",{type:this.type,name:this.object.id})}}};a("1d8a");ge.render=Oe,ge.__scopeId="data-v-716e0ac8";var ye=ge,ve={name:"Scene",components:{SceneProperty:ye},data:function(){return{border_color:"transparent",borders:{category:null,theme:null}}},props:{scene:{type:Object},mapCategories:{type:Map,default:[]},mapThemes:{type:Map,default:[]},mapScenes:{type:Map,default:[]}},methods:{dragEnter:function(e){e.preventDefault()},dragLeave:function(e){this.border_color="transparent",this.borders[e.dataTransfer.getData("type")]=null},dragOver:function(e){e.preventDefault(),this.border_color="black",this.borders[e.dataTransfer.getData("type")]="2px solid red"},drop:function(e){e.preventDefault(),this.border_color="transparent",this.borders[e.dataTransfer.getData("type")]=null;var t=e.dataTransfer.getData("type");this.scene[t]=e.dataTransfer.getData("text"),this.$emit("sceneUpdate",this.scene)}}};a("becb");ve.render=he,ve.__scopeId="data-v-f3b72cb4";var Se=ve,ke={name:"SceneList",components:{Scene:Se,SceneProperty:ye},props:{mapScenes:{type:Map,default:[]},mapCategories:{type:Map,default:[]},mapThemes:{type:Map,default:[]}},created:function(){},methods:{addCategory:function(e){e.preventDefault(),this.mapCategories.set(e.srcElement.querySelector("#categoryName").value,{color:"#ffffff"})},addTheme:function(e){e.preventDefault(),this.mapThemes.set(e.srcElement.querySelector("#themeName").value,{color:"#ffffff"})},mapToArray:function(e){return l(e)},removeProperty:function(e){var t,a=e.type,n=e.name;"category"==a?t=this.mapCategories:"theme"==a&&(t=this.mapThemes),t.delete(n)}}};a("20e0");ke.render=be,ke.__scopeId="data-v-d5a2e99c";var Pe=ke;Object(n["o"])("data-v-ec7f9c8c");var _e={id:"content"},Ce=Object(n["h"])("div",{id:"users"},null,-1);function we(e,t,a,c,r,o){var s=Object(n["s"])("PathSelector"),i=Object(n["s"])("PathVisualization");return Object(n["m"])(),Object(n["g"])("div",_e,[Object(n["j"])(s,{onPathChange:o.changeItem,id:"pathSelector",data:a.data},null,8,["onPathChange","data"]),Object(n["j"])(i,{id:"graph",data:r.actualItem.data},null,8,["data"]),Ce])}Object(n["n"])(),Object(n["o"])("data-v-84fd3094");var xe={id:"buttonContainer"};function De(e,t,a,c,r,o){var s=Object(n["s"])("PathButton");return Object(n["m"])(),Object(n["g"])("div",xe,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.data,(function(e){return Object(n["m"])(),Object(n["e"])(s,{onPathChange:o.relayPathChange,key:e.id,path:e},null,8,["onPathChange","path"])})),128))])}function Le(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$emit("pathChange",a.path.id)}),id:"pathbutton"}," Path #"+Object(n["t"])(a.path.id),1)}Object(n["n"])();var Te={name:"PathButton",props:{path:Object},emits:["pathChange"]};a("d055");Te.render=Le,Te.__scopeId="data-v-57ff6099";var Ie=Te,Me={name:"PathSelector",components:{PathButton:Ie},props:{data:Array},emits:["pathChange"],methods:{relayPathChange:function(e){this.$emit("pathChange",e)}}};a("a28a");Me.render=De,Me.__scopeId="data-v-84fd3094";var Ae=Me;const Ue={};var We=Ue,Fe={id:"VizContainer"},Ee=Object(n["h"])("svg",{id:"viz"},null,-1),qe=[Ee];function $e(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",Fe,qe)}a("a15b");var ze=a("898b"),Ne={name:"PathVisualization",props:{data:Array},watch:{data:function(e){var t=b(e).data;this.draw(t)}},mounted:function(){var e=b(this.data).data;this.draw(e)},methods:{draw:function(e){var t=this;console.log("***Data To visualize***"),console.log(e);var a=ze["g"]("#viz");a.selectAll("*").remove();var n=a.node().getBoundingClientRect().width,c=a.node().getBoundingClientRect().height,r={top:50,right:150,bottom:160,left:50},o=10,s=n-r.left-r.right,i=c-r.top-r.bottom,d=e.map((function(e){return e.zones.length})),u=d.reduce((function(e,t){return e+t})),l=d.map((function(e){return(s-o*(d.length-1))*(e/u)}));console.log("innerwidths"),console.log(l);var p=ze["f"]().domain([0,ze["d"](e.map((function(e){return ze["d"](e.zones.map((function(e){return e.founded})))})))]).range([i,0]);a.append("g").attr("class","y axis").attr("transform","translate("+r.left+","+r.top+")").call(ze["b"](p)),e.forEach((function(e,n){console.log("distance",l.reduce((function(e,t,a){return a<n?e+t:e})));var c=o*n+(0==n?0:l.reduce((function(e,t,a){return a<n?e+t:e})))+5,s=a.append("g").attr("class","SceneScoresInPath").attr("transform","translate(".concat(r.left+c,",").concat(r.top,")"));t.drawScene(s,e,p,l[n],i,c)}))},drawScene:function(e,t,a,n,c,r){var o=this,s=ze["e"]().domain(t.zones.map((function(e){return e.tag}))).range([0,n]).paddingInner(.05).paddingOuter(.2);e.append("rect").attr("id","innerContainer").attr("x",0).attr("y",0).attr("width",n).attr("height",c).attr("fill","white");var i=ze["a"](s);e.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(i).selectAll("text").attr("transform","translate(80,70)rotate(45)");var d=e.append("g");d.append("g").selectAll(".dot.founded").data(t.zones).join("rect").attr("class","dot founded").attr("x",(function(e){return s(e.tag)})).attr("y",(function(e){return a(e.founded)})).attr("width",s.bandwidth()).attr("height",(function(e){return c-a(e.founded)})).on("mouseover",(function(e){var t=e.originalTarget.__data__;o.highlightDot(d,s(t.tag)+s.bandwidth(),a(t.scored),a(t.founded),s(t.tag)+s.bandwidth()+r,c-a(t.scored),c-a(t.founded))})).on("mouseout",(function(){return o.destroyElements(d,".dashed_line")})),d.append("g").selectAll(".dot.scored").data(t.zones).join("rect").attr("class","dot scored").attr("x",(function(e){return s(e.tag)})).attr("y",(function(e){return a(e.scored)})).attr("width",s.bandwidth()).attr("height",(function(e){return c-a(e.scored)})).on("mouseover",(function(e){var t=e.originalTarget.__data__;o.highlightDot(d,s(t.tag)+s.bandwidth(),a(t.scored),a(t.founded),s(t.tag)+s.bandwidth()+r,c-a(t.scored),c-a(t.founded))})).on("mouseout",(function(){return o.destroyElements(d,".dashed_line")}))},highlightDot:function(e,t,a,n,c,r,o){this.drawDashedLine(e,{x:t-c,y:a},{x:t,y:a}),this.drawDashedLine(e,{x:t-c,y:n},{x:t,y:n}),this.drawDashedLine(e,{x:t,y:n+o},{x:t,y:n})},drawDashedLine:function(e,t,a){t.x=void 0==t.x?0:t.x,t.y=void 0==t.y?0:t.y,a.x=void 0==a.x?0:a.x,a.y=void 0==a.y?0:a.y,e.append("line").attr("class","dashed_line").attr("x1",t.x).attr("y1",t.y).attr("x2",a.x).attr("y2",a.y).attr("stroke","black").attr("stroke-width",2).attr("stroke-dasharray","16, 4")},destroyElements:function(e,t){e.selectAll(t).remove()}}};a("5a12");Ne.render=$e;var Re=Ne,Je={name:"DataByPath",components:{PathSelector:Ae,UserList:We,PathVisualization:Re},props:{data:Array},data:function(){return{actualItem:Object}},created:function(){this.actualItem=this.data[0]},methods:{changeItem:function(e){console.log(e),this.actualItem=this.data.find((function(t){return t.id==e}))}}};a("1ff7");Je.render=we,Je.__scopeId="data-v-ec7f9c8c";var Be=Je;Object(n["o"])("data-v-37711527");var Ve={key:0},He=Object(n["h"])("div",null,"V",-1),Ge=Object(n["h"])("div",null,"S",-1),Ke=[He,Ge],Qe={key:1},Xe=Object(n["i"])("All Routes"),Ye=Object(n["i"])("Computed Routes"),Ze=Object(n["i"])("Catergories Setup"),et=Object(n["i"])("Score per Path"),tt=Object(n["h"])("i",{class:"fas fa-angle-double-left"},null,-1),at=[tt];function nt(e,t,a,c,r,o){var s=Object(n["s"])("SidebarLink");return Object(n["m"])(),Object(n["g"])("div",{class:"sidebar",style:Object(n["l"])({width:c.sidebarWidth})},[Object(n["h"])("h1",null,[c.collapsed?(Object(n["m"])(),Object(n["g"])("span",Ve,Ke)):(Object(n["m"])(),Object(n["g"])("span",Qe,"Vue Sidebar"))]),Object(n["j"])(s,{onSidebar_click:t[0]||(t[0]=function(t){return e.$emit("sidebar_click","all")}),icon:"fas fa-home"},{default:Object(n["u"])((function(){return[Xe]})),_:1}),Object(n["j"])(s,{onSidebar_click:t[1]||(t[1]=function(t){return e.$emit("sidebar_click","compute")}),icon:"fas fa-columns"},{default:Object(n["u"])((function(){return[Ye]})),_:1}),Object(n["j"])(s,{onSidebar_click:t[2]||(t[2]=function(t){return e.$emit("sidebar_click","categories")}),icon:"fas fa-edit"},{default:Object(n["u"])((function(){return[Ze]})),_:1}),Object(n["j"])(s,{onSidebar_click:t[3]||(t[3]=function(t){return e.$emit("sidebar_click","scorePerPath")}),icon:"far fa-chart-bar"},{default:Object(n["u"])((function(){return[et]})),_:1}),Object(n["h"])("span",{class:Object(n["k"])(["collapse-icon",{"rotate-180":c.collapsed}]),onClick:t[4]||(t[4]=function(){return c.toggleSidebar&&c.toggleSidebar.apply(c,arguments)})},at,2)],4)}Object(n["n"])(),Object(n["o"])("data-v-20a26c90");var ct={key:0};function rt(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",{class:"sidebarlink",onClick:t[0]||(t[0]=function(t){return e.$emit("sidebar_click")})},[Object(n["h"])("i",{class:Object(n["k"])(["icon",a.icon])},null,2),Object(n["j"])(n["b"],{name:"fade"},{default:Object(n["u"])((function(){return[c.collapsed?Object(n["f"])("",!0):(Object(n["m"])(),Object(n["g"])("span",ct,[Object(n["r"])(e.$slots,"default",{},void 0,!0)]))]})),_:3})])}Object(n["n"])();var ot=Object(n["p"])(!1),st=function(){return ot.value=!ot.value},it=180,dt=38,ut=Object(n["c"])((function(){return"".concat(ot.value?dt:it,"px")})),lt={emits:["sidebar_click"],props:{icon:{type:String,required:!0}},setup:function(e){return{collapsed:ot}}};a("ddfd");lt.render=rt,lt.__scopeId="data-v-20a26c90";var pt=lt,bt={emits:["sidebar_click"],props:{},components:{SidebarLink:pt},setup:function(){return{collapsed:ot,toggleSidebar:st,sidebarWidth:ut}}};a("c0d6"),a("1849");bt.render=nt,bt.__scopeId="data-v-37711527";var ht=bt;function ft(e,t,a,c,r,o){var s=Object(n["s"])("FileLoader");return Object(n["m"])(),Object(n["g"])("header",null,[Object(n["h"])("h1",null,Object(n["t"])(a.title),1),Object(n["j"])(s,{onFilesLoaded:o.filesLoaded,fields:a.fields,isLoading:a.isLoading,mapScenes:a.mapScenes,mapCategories:a.mapCategories,mapThemes:a.mapThemes,csvData:a.csvData,perUserScores:a.perUserScores},null,8,["onFilesLoaded","fields","isLoading","mapScenes","mapCategories","mapThemes","csvData","perUserScores"])])}a("a9e3");Object(n["o"])("data-v-6920c9a3");var mt={id:"accessButtons"},jt=Object(n["h"])("i",{class:"fas fa-play-circle icon"},null,-1),Ot=[jt],gt={key:1},yt=Object(n["h"])("i",{class:"fas fa-spinner fa-pulse icon"},null,-1),vt=[yt],St={key:2},kt=Object(n["h"])("i",{class:"fas fa-spinner fa-spin icon"},null,-1),Pt=[kt],_t=Object(n["h"])("i",{class:"fas fa-upload icon"},null,-1),Ct=[_t],wt=Object(n["h"])("i",{class:"fas fa-download icon"},null,-1),xt=[wt];function Dt(e,t,a,c,r,o){var s=Object(n["s"])("Prompt");return Object(n["m"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("div",mt,[a.isLoading?Object(n["f"])("",!0):(Object(n["m"])(),Object(n["g"])("span",{key:0,onClick:t[0]||(t[0]=function(){return o.startAnalysis&&o.startAnalysis.apply(o,arguments)})},Ot)),1==a.isLoading?(Object(n["m"])(),Object(n["g"])("span",gt,vt)):Object(n["f"])("",!0),2==a.isLoading?(Object(n["m"])(),Object(n["g"])("span",St,Pt)):Object(n["f"])("",!0),Object(n["h"])("span",{onClick:t[1]||(t[1]=function(e){return r.currentWindow="upload"})},Ct),Object(n["h"])("span",{onClick:t[2]||(t[2]=function(e){return r.currentWindow="download"})},xt)]),"upload"==r.currentWindow?(Object(n["m"])(),Object(n["e"])(s,{key:0,data:a.fields,onFileChange:o.fileChange,onCurrentWindowChange:t[3]||(t[3]=function(e){return r.currentWindow=e}),type:"largePanels"},null,8,["data","onFileChange"])):Object(n["f"])("",!0),"download"==r.currentWindow?(Object(n["m"])(),Object(n["e"])(s,{key:1,data:a.perUserScores,onCurrentWindowChange:t[4]||(t[4]=function(e){return r.currentWindow=e}),type:"propList"},null,8,["data"])):Object(n["f"])("",!0)],64)}Object(n["n"])();var Lt=a("1da1");a("96cf"),a("b64b");Object(n["o"])("data-v-09cc5462");var Tt={class:"prompt"},It={key:0,id:"content"},Mt=["for"],At=["id","name","accept"],Ut={key:1,id:"list"},Wt=["href"];function Ft(e,t,a,c,r,o){return Object(n["m"])(),Object(n["g"])("div",Tt,[Object(n["h"])("div",{id:"background",onClick:t[0]||(t[0]=function(t){return e.$emit("currentWindowChange",null)})}),"largePanels"==a.type?(Object(n["m"])(),Object(n["g"])("div",It,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.data,(function(a){var c;return Object(n["m"])(),Object(n["g"])("div",{key:a.name,onClick:t[2]||(t[2]=function(){return o.uploadFile&&o.uploadFile.apply(o,arguments)})},[Object(n["h"])("label",{for:a.name},Object(n["t"])(a.label),9,Mt),Object(n["h"])("input",{type:"file",id:a.name,name:a.name,accept:"."+a.format,onChange:t[1]||(t[1]=function(t){return e.$emit("fileChange",t)})},null,40,At),Object(n["h"])("i",null,Object(n["t"])(a.file?a.file.name+" "+((null===(c=a.file)||void 0===c?void 0:c.size)/1e6).toFixed(2)+"MB":""),1)])})),128))])):Object(n["f"])("",!0),"propList"==a.type?(Object(n["m"])(),Object(n["g"])("div",Ut,[(Object(n["m"])(!0),Object(n["g"])(n["a"],null,Object(n["q"])(a.data,(function(a,c){return Object(n["m"])(),Object(n["g"])("div",{key:a.Scene,onClick:t[3]||(t[3]=function(){return e.downloadFile&&e.downloadFile.apply(e,arguments)})},[Object(n["h"])("a",{href:"data:text/csv;charset=utf-8,"+encodeURIComponent(o.csvFormat(a))},Object(n["t"])(c),9,Wt),Object(n["i"])(" "+Object(n["t"])("".concat(Object.keys(a).length," Utilisateurs")),1)])})),128))])):Object(n["f"])("",!0)])}Object(n["n"])();a("07ac");var Et={name:"Prompt",emits:["fileChange","currentWindowChange"],components:{},data:function(){return{}},props:{data:Object,type:String},created:function(){},methods:{uploadFile:function(e){"DIV"==e.target.tagName&&e.target.querySelector("input").click()},csvFormat:function(e){return ze["c"](Object.values(e))}}};a("4905");Et.render=Ft,Et.__scopeId="data-v-09cc5462";var qt=Et,$t={name:"FileLoader",components:{Prompt:qt},data:function(){return{currentWindow:""}},props:{mapScenes:{type:Map,default:[]},mapCategories:{type:Map,default:[]},mapThemes:{type:Map,default:[]},csvData:String,isLoading:Number,perUserScores:Object,fields:{type:Array,default:[{name:"fileLoader",label:"Select a file here",defaultPath:"",format:".csv"}]}},emits:["filesLoaded"],methods:{load_file:function(){var e=Object(Lt["a"])(regeneratorRuntime.mark((function e(t){var a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=a,n.readAsText(e)}))},e.prev=1,e.next=4,a(t);case 4:c=e.sent,n=d3.csvParse(c,d3.autoType),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),startAnalysis:function(){var e=Object(Lt["a"])(regeneratorRuntime.mark((function e(){var t,a,n,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.fields.forEach((function(e){var a=e.file;t.push(void 0!=a?c.load_file(a):d3[e.format](e.defaultPath))})),a={},e.next=5,Promise.all(t);case 5:n=e.sent,this.fields.forEach((function(e,t){a[e.name]=n[t]})),this.$emit("filesLoaded",a);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fileChange:function(e){this.fields.find((function(t){return t.name==e.target.id})).file=e.target.files[0]},mapToArray:function(e){return l(e)}}};a("35c6");$t.render=Dt,$t.__scopeId="data-v-6920c9a3";var zt=$t,Nt={name:"Header",components:{FileLoader:zt},emits:["filesLoaded"],data:function(){return{}},props:{mapScenes:{type:Map,default:[]},mapCategories:{type:Map,default:[]},mapThemes:{type:Map,default:[]},title:{type:String,default:"[Insert Title here]"},perUserScores:Object,csvData:String,isLoading:Number,fields:{}},methods:{filesLoaded:function(e){this.$emit("filesLoaded",e)}}};a("8a0c");Nt.render=ft,Nt.__scopeId="data-v-696dec80";var Rt=Nt,Jt={name:"App",components:{Header:Rt,ComputedRoutes:ee,AllRoutes:ne,Sidebar:ht,SceneList:Pe,DataByPath:Be},data:function(){return{computeWorker:Worker,display:"categories",general_usage_output:[],detail_usage_output:[],paths:[],computedPaths:[],scorePerPathData:[],scenes:[],categories:[],themes:[],perUserScores:[],csvData:"",isLoading:0,merge_themes:!1,fields:[{name:"general",label:"Select general data file file here",defaultPath:"/general.csv",format:"csv"},{name:"detail",label:"Select detail data file file here",defaultPath:"/detail.csv",format:"csv"},{name:"categories",label:"Select categories and themes data file here",defaultPath:"/sceneInfo.json",format:"json"}]}},setup:function(){return{sidebarWidth:ut}},created:function(){var e=this;this.computeWorker=new Worker("/compute.js"),this.computeWorker.onmessage=function(t){e.isLoading=2,p(1).then((function(){"computeData"==t.data.order?(e.scenes=t.data.scenes,e.categories=t.data.categories,e.themes=t.data.themes,e.paths=t.data.paths,e.detail_usage_output=t.data.detail_usage_output,e.general_usage_output=t.data.general_usage_output,e.computedPaths=t.data.computedPaths,e.scorePerPathData=t.data.scorePerPathData,e.getPerUserScores()):"computePaths"==t.data.order?(e.computedPaths=t.data.computedPaths,e.scorePerPathData=t.data.scorePerPathData):"perUserScores"==t.data.order&&(e.perUserScores=t.data.perUserScores),e.isLoading=0}))}},computed:function(){},methods:{updateAndComputePaths:function(){this.isLoading=1,this.updatePathsWhitelist(this.paths),this.computeWorker.postMessage(JSON.parse(JSON.stringify({order:"computePaths",paths:this.paths,scenes:l(this.scenes),merge_themes:this.merge_themes})))},mergeThematic:function(e){this.isLoading=1,this.merge_themes=e,this.computeWorker.postMessage(JSON.parse(JSON.stringify({order:"computePaths",paths:this.paths,scenes:l(this.scenes),merge_themes:this.merge_themes})))},extractScorePerPathData:function(e){this.isLoading=1,this.computeWorker.postMessage(JSON.parse(JSON.stringify({order:"extractPathData",paths:this.paths,scenes:l(this.scenes)})))},sidebarManager:function(e){this.display=e},updatePathsWhitelist:function(e){var t=this;e.forEach((function(e){e.scenes.forEach((function(e){e.whitelisted=t.categories.get(t.scenes.get(e.scene).category).whitelisted}))}))},sceneUpdate:function(e){this.scenes.set(e.id,e),this.updateAndComputePaths()},computeData:function(e){this.isLoading=1,this.computeWorker.postMessage({order:"computeData",files:e,merge_themes:this.merge_themes})},getPerUserScores:function(){this.computeWorker.postMessage(JSON.parse(JSON.stringify({order:"perUserScores",paths:this.paths})))}}};a("a3a0");Jt.render=i;var Bt=Jt;a("7051");Object(n["d"])(Bt).mount("#app")},"5a12":function(e,t,a){"use strict";a("cb98")},"5ce6":function(e,t,a){"use strict";a("b024")},6311:function(e,t,a){},"6ea1":function(e,t,a){},"7a15":function(e,t,a){},"82f4":function(e,t,a){"use strict";a("c7c0")},"88ee":function(e,t,a){},"8a0c":function(e,t,a){"use strict";a("7a15")},"91f9":function(e,t,a){},a28a:function(e,t,a){"use strict";a("2b6f")},a3a0:function(e,t,a){"use strict";a("1313")},ac5b:function(e,t,a){},ae06:function(e,t,a){"use strict";a("2451")},b024:function(e,t,a){},b765:function(e,t,a){},becb:function(e,t,a){"use strict";a("21dd")},c0d6:function(e,t,a){"use strict";a("e79c")},c7c0:function(e,t,a){},cb98:function(e,t,a){},d055:function(e,t,a){"use strict";a("203a")},ddfd:function(e,t,a){"use strict";a("3ad7")},e79c:function(e,t,a){},eca0:function(e,t,a){},edf2:function(e,t,a){"use strict";a("2f70")},fd94:function(e,t,a){"use strict";a("b765")}});
//# sourceMappingURL=app.737c7f45.js.map